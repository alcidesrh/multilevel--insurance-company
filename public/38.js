(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{36:function(t,e,a){"use strict";var r={props:["dateParam","label","birthday","max","min","allowedDates"],data:function(){return{menu:!1,date:null}},computed:{computedDateFormattedMomentjs:function(){return this.date?this.$options.filters.dateFormat(this.date):""}},watch:{menu:function(t){var e=this;this.birthday&&t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"}))},date:function(t){this.$emit("update:dateParam",t)},dateParam:function(t){t||(this.date=null)}},created:function(){this.date=this.dateParam||null}},n=a(6),i=a(11),o=a.n(i),s=a(477),u=a(105),l=a(26),c=Object(n.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{clearable:"",value:t.computedDateFormattedMomentjs,label:t.label,readonly:"","prepend-inner-icon":"mdi-calendar-month"},on:{"click:clear":function(e){t.date=null}}},"v-text-field",n,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),a("v-date-picker",{ref:"picker",attrs:{"allowed-dates":t.allowedDates,min:t.min||null,max:t.max||null},on:{input:function(e){t.menu=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)}),[],!1,null,null,null);e.a=c.exports;o()(c,{VDatePicker:s.a,VMenu:u.a,VTextField:l.a})},385:function(t,e,a){"use strict";var r=a(2),n=a(30),i=a(28);e.a=Object(r.a)(n.a,Object(i.b)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0}),a={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=t.$watch("shouldValidate",r=>{r&&(this.errorBag.hasOwnProperty(t._uid)||(a.valid=e(t)))}):a.valid=e(t),a},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const a=this.watchers.find(t=>t._uid===e._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},482:function(t,e,a){"use strict";a.r(e);var r=a(10),n=a(1),i=a.n(n),o=a(36),s=a(20),u=a.n(s),l=a(14),c=a(17);function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var p={components:{DatePicker:o.a},data:function(){return{fieldRequire:c.b,computer:null,date:null,time:null,loading:!1,headers:[{text:"",value:"user",sortable:!1},{text:"Nombre",value:"user.name",sortable:!1},{text:"Rol",value:"user.role.name",sortable:!1},{text:"Día",value:"day",sortable:!1},{text:"Horario",value:"turn",sortable:!1},{text:"Computadora",value:"computer",sortable:!1},{text:"",value:"action",sortable:!1}],turns:[],bussy:[]}},computed:m(m({},Object(r.b)("user",["user"])),{},{computers:function(){if(!this.time)return[];for(var t=[],e=1;e<7;e++)this.bussy.length&&this.bussy.includes(e)||t.push({text:"Computadora ".concat(e),value:e});return t},today:function(){return(new Date).toISOString()},hours:function(){if(!this.date)return[];var t=i()(this.date).format("d"),e=[];if(1==t||6==t||7==t)for(var a=0,r=2;a<3;a++,r+=2)e.push({text:"0".concat(r,":00 pm a 0").concat(r+2,":00 pm"),value:a+1});else for(var n=0,o=10;n<5;n++,o+=2)o<12&&o>8?e.push({text:"".concat(o,":00 am a ").concat(o+2,":00 pm"),value:n+1}):12==o?(e.push({text:"12:00 pm a 02:00 pm",value:n+1}),o=0):e.push({text:"0".concat(o,":00 pm a 0").concat(o+2,":00 pm"),value:n+1});return e}}),watch:{time:function(){var t=this;this.time&&u.a.post("/api/computer/avialable",{day:this.date,turn:this.time}).then((function(e){t.bussy=e.data})).catch((function(t){l.a.$emit("alert",{text:t.response.data.error})})).finally((function(){t.loading=!1}))},date:function(){this.time=null}},methods:{remove:function(t){var e=this;this.loading=!0,u.a.delete("/api/computer/"+t).then((function(t){e.turns=t.data})).catch((function(t){l.a.$emit("alert",{text:t.response.data.error})})).finally((function(){e.loading=!1}))},formatTurn:function(t){var e=i()(t.day).format("d");if(1==e||6==e||7==e){for(var a=0,r=2;a<3;a++,r+=2)if(t.turn==a+1)return"0".concat(r,":00 pm a 0").concat(r+2,":00 pm")}else for(var n=0,o=10;n<5;n++,o+=2)if(o<12&&o>8){if(t.turn==n+1)return"".concat(o,":00 am a ").concat(o+2,":00 pm")}else if(12==o){if(t.turn==n+1)return"12:00 pm a 02:00 pm";o=0}else if(t.turn==n+1)return"0".concat(o,":00 pm a 0").concat(o+2,":00 pm")},allowedDates:function(t){return 0!=i()(t).format("d")},allowedHours:function(t){return t%2},save:function(){var t=this;this.$refs.form.validate()&&(this.loading=!0,u.a.post("/api/computer",{day:this.date,computer:this.computer,turn:this.time}).then((function(e){t.$refs.form.reset(),t.date=t.time=t.computer=null,t.turns=e.data.data})).catch((function(t){l.a.$emit("alert",{text:t.response.data.error})})).finally((function(){t.loading=!1})))}},created:function(){var t=this;this.loading=!0,u.a.get("/api/computer").then((function(e){console.log(e.data.data),t.turns=e.data.data})).catch((function(t){l.a.$emit("alert",{text:t.response.data.error})})).finally((function(){t.loading=!1}))}},h=a(6),v=a(11),b=a.n(v),y=a(106),w=a(75),_=a(398),g=a(476),x=a(385),k=a(84),O=a(399),j=a(39),V=Object(h.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.is(t.user,"admin")?a("v-row",[a("v-col",{staticClass:"headline"},[t._v("Reservación de computadoras")])],1):a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-row",[a("v-col",{staticClass:"headline"},[t._v("Reservar computadora")])],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("DatePicker",{attrs:{label:"Día","date-param":t.date,min:t.today,"allowed-dates":t.allowedDates},on:{"update:dateParam":function(e){t.date=e},"update:date-param":function(e){t.date=e}}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-select",{attrs:{disabled:!t.date,items:t.hours,label:"Hora",rules:t.fieldRequire,required:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-select",{attrs:{rules:t.fieldRequire,required:"",disabled:!t.time,items:t.computers,label:"Selecciona computadora"},scopedSlots:t._u([{key:"no-data",fn:function(){return[t.date?a("div",{staticClass:"pa-2"},[t._v("No hay disponibilidad")]):a("div",{staticClass:"pa-2"},[t._v("Escoja un día")])]},proxy:!0}]),model:{value:t.computer,callback:function(e){t.computer=e},expression:"computer"}})],1)],1),t._v(" "),a("v-row",[a("v-col",{staticClass:"d-flex justify-end"},[a("v-btn",{attrs:{rounded:"",color:"primary",dark:"",loading:t.loading},on:{click:function(e){return t.save()}}},[t._v("Guardar")])],1)],1)],1),t._v(" "),a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:t.headers,items:t.turns},scopedSlots:t._u([{key:"item.user",fn:function(e){var r=e.item;return[a("div",{staticClass:"py-2"},[a("v-avatar",{attrs:{color:"grey",size:"50"}},[r.user.image?a("img",{attrs:{src:r.user.image.url}}):a("v-icon",{attrs:{size:"50"}},[t._v("mdi-account")])],1)],1)]}},{key:"item.day",fn:function(e){var a=e.item;return[t._v("\n          "+t._s(t._f("dateFormat")(a.day))+"\n        ")]}},{key:"item.turn",fn:function(e){var a=e.item;return[t._v("\n          "+t._s(t.formatTurn(a))+"\n        ")]}},{key:"item.computer",fn:function(e){var a=e.item;return[t._v("\n          Computadora "+t._s(a.computer)+"\n        ")]}},{key:"item.action",fn:function(e){var r=e.item;return[a("div",{staticStyle:{"white-space":"nowrap"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.remove(r.id)}}},[a("v-icon",{attrs:{size:"20",color:"red"}},[t._v("mdi-delete")])],1)],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);e.default=V.exports;b()(V,{VAvatar:y.a,VBtn:w.a,VCol:_.a,VDataTable:g.a,VForm:x.a,VIcon:k.a,VRow:O.a,VSelect:j.a})}}]);